/* Modern Consultancy Design System - Based on template.html style */

/* Material Icons */
.material-icons,
.material-icons-outlined {
  font-size: inherit;
  line-height: inherit;
}

/* Hover Underline Animation */
.hover-underline-animation {
  display: inline-block;
  position: relative;
}

.hover-underline-animation::after {
  content: "";
  position: absolute;
  width: 100%;
  transform: scaleX(0);
  height: 2px;
  bottom: -2px;
  left: 0;
  background-color: #d97706;
  transform-origin: bottom right;
  transition: transform 0.25s ease-out;
}

.hover-underline-animation:hover::after {
  transform: scaleX(1);
  transform-origin: bottom left;
}

/* Base Typography and Spacing */
:root {
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  --vh: 1vh; /* Viewport height unit for mobile browsers */
  
  /* Light mode colors */
  --bg-primary: #fafaf9;
  --bg-secondary: #f5f5f4;
  --bg-tertiary: #ffffff;
  --text-primary: #1c1917;
  --text-secondary: #57534e;
  --text-tertiary: #78716c;
  --border-color: #e7e5e4;
  --accent-color: #d97706;
  --accent-hover: #b45309;
  --shadow-color: rgba(0, 0, 0, 0.1);
}

/* Dark mode colors */
:root.dark {
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2a2a2a;
  --text-primary: #ffffff;
  --text-secondary: #e5e5e5;
  --text-tertiary: #a3a3a3;
  --border-color: #404040;
  --accent-color: #f59e0b;
  --accent-hover: #d97706;
  --shadow-color: rgba(0, 0, 0, 0.5);
}

/* Comprehensive dark mode background overrides */
:root.dark {
  background-color: var(--bg-primary) !important;
}

:root.dark html {
  background-color: var(--bg-primary) !important;
}

:root.dark body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

:root.dark main {
  background-color: var(--bg-primary) !important;
}

:root.dark section {
  background-color: var(--bg-primary) !important;
}

/* Exception: Hero section should not have solid background */
:root.dark section#hero {
  background-color: transparent !important;
}

:root.dark div {
  background-color: inherit;
}

/* Exception: Hero section divs should not inherit solid backgrounds */
:root.dark section#hero div {
  background-color: transparent !important;
}

/* Ensure all hero section child elements have transparent backgrounds */
:root.dark section#hero * {
  background-color: transparent !important;
}

/* Ensure button backgrounds work properly in hero */
:root.dark section#hero .btn-primary,
:root.dark section#hero button,
:root.dark section#hero a[class*="btn"] {
  background-color: #d97706 !important;
}

:root.dark section#hero .border-stone-100 {
  background-color: transparent !important;
}

/* Override any white/light backgrounds */
:root.dark .bg-white {
  background-color: var(--bg-tertiary) !important;
}

:root.dark .bg-stone-50 {
  background-color: var(--bg-primary) !important;
}

:root.dark .bg-stone-100 {
  background-color: var(--bg-secondary) !important;
}

:root.dark .bg-gray-50 {
  background-color: var(--bg-secondary) !important;
}

:root.dark .bg-gray-100 {
  background-color: var(--bg-secondary) !important;
}

/* Preserve specific element backgrounds that should remain solid */
:root.dark .card,
:root.dark .nav,
:root.dark .header,
:root.dark [class*="card"] {
  background-color: var(--bg-tertiary) !important;
}

/* Fix modal and popup backgrounds */
:root.dark .modal,
:root.dark .popup,
:root.dark .dropdown {
  background-color: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
}

/* Override Tailwind text colors for dark mode */
:root.dark .text-stone-400 {
  color: var(--text-tertiary) !important;
}

/* Additional comprehensive dark mode fixes */

/* Enhanced text contrast fixes for dark mode */
:root.dark .text-stone-50,
:root.dark .text-stone-100,
:root.dark .text-stone-200 {
  color: var(--text-primary) !important;
}

:root.dark .text-stone-300,
:root.dark .text-stone-400 {
  color: var(--text-secondary) !important;
}

:root.dark .text-gray-50,
:root.dark .text-gray-100,
:root.dark .text-gray-200 {
  color: var(--text-primary) !important;
}

:root.dark .text-gray-300,
:root.dark .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Enhanced dark mode contrast for bullet points and lists with text-stone-600 */
:root.dark ul.text-stone-600,
:root.dark .text-stone-600 ul,
:root.dark ul .text-stone-600 {
  color: var(--text-secondary) !important;
}

:root.dark ul.text-stone-600 li,
:root.dark .text-stone-600 ul li,
:root.dark ul .text-stone-600 li {
  color: var(--text-secondary) !important;
}

:root.dark .text-stone-500,
:root.dark .text-stone-600,
:root.dark .text-stone-700,
:root.dark .text-stone-800 {
  color: var(--text-secondary) !important;
}

/* Ensure all headings are properly visible */
:root.dark h1,
:root.dark h2, 
:root.dark h3,
:root.dark h4,
:root.dark h5,
:root.dark h6 {
  color: var(--text-primary) !important;
}

/* Fix heading classes specifically */
:root.dark .heading-2,
:root.dark .heading-3 {
  color: var(--text-primary) !important;
}

/* Ensure body text classes are readable */
:root.dark .body-large,
:root.dark .body-regular,
:root.dark .body-small {
  color: var(--text-secondary) !important;
}

/* Fix any remaining text color issues */
:root.dark p {
  color: var(--text-secondary) !important;
}

:root.dark strong {
  color: var(--text-primary) !important;
}

/* Fix link colors in dark mode */
:root.dark a {
  color: var(--accent-color) !important;
}

:root.dark a:hover {
  color: var(--accent-hover) !important;
}

/* Fix section backgrounds */
:root.dark section {
  background-color: var(--bg-primary) !important;
}

/* Fix container backgrounds but allow cards to override */
:root.dark .container {
  background-color: var(--bg-primary) !important;
}

/* Ensure proper button styling in dark mode */
:root.dark .btn {
  background-color: var(--accent-color) !important;
  color: white !important;
  border-color: var(--accent-color) !important;
}

:root.dark .btn:hover {
  background-color: #d97706 !important;
  border-color: #d97706 !important;
}

/* Enhanced button styling for better dark mode contrast */
:root.dark .btn-primary {
  background-color: #f59e0b !important;
  color: #000000 !important;
  border: 2px solid #f59e0b !important;
  font-weight: 700 !important;
}

:root.dark .btn-primary:hover {
  background-color: #d97706 !important;
  color: #ffffff !important;
  border-color: #d97706 !important;
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.4) !important;
}

/* Contact button styling in dark mode */
:root.dark .bg-amber-600 {
  background-color: #f59e0b !important;
  color: #000000 !important;
  border: 2px solid #f59e0b !important;
}

:root.dark .bg-amber-600:hover,
:root.dark .hover\\:bg-amber-700:hover {
  background-color: #d97706 !important;
  color: #ffffff !important;
  border-color: #d97706 !important;
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.4) !important;
}

/* Fix form elements in dark mode */
:root.dark input,
:root.dark textarea,
:root.dark select {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

:root.dark input:focus,
:root.dark textarea:focus,
:root.dark select:focus {
  border-color: var(--accent-color) !important;
  box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2) !important;
}

/* Navigation Links - Template Style */
.nav-link {
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  transition: all 0.2s ease;
  display: block;
  /* Ensure consistent layout across themes */
  white-space: nowrap;
  box-sizing: border-box;
  /* Force consistent text rendering */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

.nav-link:hover {
  color: var(--accent-color);
}

/* Mobile Menu */
#header-nav-links {
  transition: all 0.3s ease;
}

#header-nav-links.hidden {
  display: none;
}

@media (max-width: 1279px) {
  #header-nav-links {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: rgba(245, 245, 244, 0.98);
    backdrop-filter: blur(12px);
    border-top: 1px solid #e7e5e4;
    border-bottom: 1px solid #e7e5e4;
    padding: 1.5rem;
    display: flex !important; /* Override Tailwind hidden class */
    flex-direction: column;
    gap: 0.75rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    z-index: 40;
  }
  
  #header-nav-links.hidden {
    display: none !important; /* Only hide when explicitly hidden */
  }
  
  #header-nav-links .nav-link,
  #header-nav-links a {
    font-size: 1.125rem;
    padding: 0.875rem 1rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    text-align: center;
    border: 1px solid transparent;
  }
  
  #header-nav-links a:hover {
    color: #d97706;
    border-color: #d97706;
  }
}

@media (min-width: 1280px) {
  #header-nav-links {
    position: static !important;
    background: transparent !important;
    backdrop-filter: none !important;
    border: none !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: row !important;
    gap: 2.5rem !important;
    margin-right: 2rem !important; /* Add spacing to the right of nav links */
    /* Force consistent positioning */
    width: auto !important;
    min-width: fit-content !important;
    flex-shrink: 0 !important;
    /* Ensure identical layout in both themes */
    align-items: center !important;
    justify-content: flex-start !important;
  }
  
  #header-nav-links.hidden {
    display: flex !important;
  }
  
  /* Ensure navigation positioning is pixel-perfect identical in both themes */
  nav#header-nav-links {
    position: relative !important;
    transform: translateX(0) !important;
    left: auto !important;
    right: auto !important;
    margin-left: 0 !important;
  }
  
  /* Ensure nav links maintain consistent spacing and positioning */
  nav#header-nav-links .nav-link {
    display: inline-block !important;
    vertical-align: middle !important;
    margin: 0 !important;
    border: none !important;
    outline: none !important;
  }
}

/* Header sticky positioning - override flexbox interference */
header {
  /* Force sticky positioning */
  position: sticky !important;
  top: 0 !important;
  z-index: 50 !important;
}

/* Fix flexbox container that prevents sticky positioning */
.layout-container {
  /* Remove height constraints that prevent sticky */
  height: auto !important;
  min-height: 100vh !important;
}

/* Ensure parent containers support sticky positioning */
div.relative.flex.size-full.min-h-screen.flex-col {
  /* Remove overflow hidden that can break sticky */
  overflow: visible !important;
}

/* Ensure body supports sticky positioning */
body {
  overflow-x: hidden;
  height: auto !important;
}

/* Section Spacing - Template Style */
.section-minimal {
  padding: 4rem 0;
  margin: 2rem 0;
}

/* Card System - Template Style */
.card {
  background: white;
  border: 1px solid #e7e5e4;
  border-radius: 0.75rem;
  padding: 2rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  transform: translateY(-2px);
}

/* Typography - Template Style */
.heading-2 {
  font-size: 2.25rem;
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: -0.025em;
  color: #1c1917;
}

.heading-3 {
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.3;
  color: #1c1917;
}

.body-large {
  font-size: 1.125rem;
  line-height: 1.7;
  color: #57534e;
}

.body-regular {
  font-size: 1rem;
  line-height: 1.6;
  color: #57534e;
}

.body-small {
  font-size: 0.875rem;
  line-height: 1.6;
  color: #78716c;
}

/* Hero Section Background Positioning - Responsive Design */
section#hero div.relative {
  background-position: center center !important;
  background-size: cover !important; /* Changed from 150% auto to cover for mobile */
  background-repeat: no-repeat !important;
  transition: background-position 0.3s ease-in-out;
}

/* For screens 640px+ where text is right-aligned, shift background left by ~20% */
@media (min-width: 640px) {
  section#hero div.relative {
    background-position: 100% center !important; /* 100% as you specified */
    background-size: 150% auto !important; /* Keep larger size for desktop effect */
    background-repeat: no-repeat !important;
  }
}

/* Mobile screens (below 640px) use center positioning and cover to prevent borders */
@media (max-width: 639px) {
  section#hero div.relative {
    background-position: center center !important;
    background-size: cover !important; /* Use cover to fill completely on mobile */
    background-repeat: no-repeat !important;
  }
}

/* List Styling - Template Style */
.list-modern {
  list-style: none;
  padding: 0;
}

.list-modern li {
  position: relative;
  padding-left: 1.5rem;
  margin-bottom: 0.5rem;
  color: #57534e;
  line-height: 1.6;
}

.list-modern li::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0.75em;
  width: 4px;
  height: 4px;
  background: #d97706;
  border-radius: 50%;
}

/* Images - Template Style */
.profile-image {
  width: 100%;
  max-width: 280px;
  height: 280px;
  border-radius: 0.75rem;
  object-fit: cover;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  transition: transform 0.3s ease;
}

.profile-image:hover {
  transform: scale(1.02);
}

.project-card-image {
  width: 100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-radius: 0.75rem;
}

.community-image {
  border-radius: 0.75rem;
  object-fit: cover;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
}

/* Responsive image adjustments */
@media (max-width: 480px) {
  .profile-image {
    max-width: 200px;
    height: 200px;
  }
  
  .project-card-image {
    aspect-ratio: 4 / 3;
  }
}

@media (max-width: 768px) {
  .profile-image {
    max-width: 240px;
    height: 240px;
  }
  
  .project-card-image {
    aspect-ratio: 3 / 2;
  }
}

@media (min-width: 1025px) {
  .profile-image:hover {
    transform: scale(1.05);
  }
  
  .community-image:hover {
    transform: scale(1.02);
  }
}

/* Form Elements - Template Style */
.input-field {
  background: #fafaf9;
  border: 1px solid #d6d3d1;
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  color: #1c1917;
  font-size: 1rem;
  transition: all 0.2s ease;
  width: 100%;
}

.input-field:focus {
  outline: none;
  border-color: #d97706;
  box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
  background: white;
}

.input-field::placeholder {
  color: #a8a29e;
}

/* Mobile font size improvements */
@media (max-width: 768px) {
  .input-field {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 0.875rem 1rem;
  }
  
  textarea.input-field {
    font-size: 16px;
    min-height: 120px;
  }
}

/* Enhanced mobile form styling */
@media (max-width: 480px) {
  .input-field {
    font-size: 16px;
    padding: 1rem;
    border-radius: 0.75rem;
  }
  
  textarea.input-field {
    min-height: 100px;
    resize: vertical;
  }
}

@media (min-width: 1025px) {
  .input-field:hover {
    border-color: #a8a29e;
    background: #fff;
  }
}

/* Form Messages */
.form-message {
  font-size: 0.875rem;
  line-height: 1.5;
}

@media (max-width: 768px) {
  .form-message {
    font-size: 1rem;
  }
}

/* Button System - Template Style */
.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 2rem;
  background: #d97706;
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 600;
  font-size: 1rem;
  text-decoration: none;
  transition: all 0.3s ease;
  cursor: pointer;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  min-height: 44px; /* Touch target size for accessibility */
  white-space: nowrap;
}

.btn-primary:hover {
  background: #b45309;
  transform: translateY(-1px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Responsive button adjustments */
@media (max-width: 480px) {
  .btn-primary {
    padding: 0.75rem 1.25rem;
    font-size: 0.875rem;
    border-radius: 0.5rem;
  }
}

@media (max-width: 768px) {
  .btn-primary {
    padding: 0.875rem 1.5rem;
    font-size: 0.875rem;
  }
}

@media (min-width: 1025px) {
  .btn-primary:hover {
    transform: translateY(-2px);
  }
}

/* Service Cards Grid */
.services-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
}

/* Project Cards */
.project-card {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.project-card:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

/* Publications Cards */
.publication-card {
  background: white;
  border-top: 4px solid #0ea5e9;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.publication-card:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Community Cards */
.community-card {
  background: white;
  border: 2px dashed #14b8a6;
  border-radius: 0.75rem;
  padding: 2rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.community-card:hover {
  border-color: #0f766e;
  transform: translateY(-2px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Enhanced Landing Page Animations */
.hero-title {
  animation: fadeInScale 0.8s ease-out forwards;
}

.hero-subtitle {
  animation: slideInLeft 0.6s ease-out 0.2s both;
}

.hero-description {
  animation: slideInRight 0.6s ease-out 0.4s both;
}

.hero-buttons {
  animation: fadeInUp 0.6s ease-out 0.6s both;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateY(50px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Floating animation for cards */
@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-6px);
  }
}

/* Subtle breathing animation for important elements */
@keyframes breathe {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

.breathe {
  animation: breathe 4s ease-in-out infinite;
}

/* Enhanced focus states for accessibility */
:focus-visible {
  outline: 3px solid var(--accent-color) !important;
  outline-offset: 2px !important;
  border-radius: 0.25rem !important;
}

:root.dark :focus-visible {
  outline-color: var(--accent-color) !important;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2) !important;
}

/* Smooth transitions for all interactive elements */
a, button, .nav-link, .btn-primary, .card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .float,
  .breathe,
  .hero-background {
    animation: none !important;
  }
}

/* Dark mode */
:root.dark {
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2a2a2a;
  --text-primary: #ffffff;
  --text-secondary: #e5e5e5;
  --text-tertiary: #a3a3a3;
  --border-color: #404040;
  --accent-color: #f59e0b;
  --accent-hover: #d97706;
  --shadow-color: rgba(0, 0, 0, 0.5);
}

/* Restore transitions for dark mode but exclude toggle icon */
:root.dark * {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Ensure dark mode applies to the entire page */
:root.dark body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* Header Dark Mode */
:root.dark header {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  backdrop-filter: blur(12px) !important; /* Keep consistent with light mode */
}

header {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

/* Fix header transparency in dark mode */
:root.dark header.bg-stone-50\/80 {
  background-color: rgba(26, 26, 26, 0.8) !important;
  backdrop-filter: blur(12px) !important; /* Consistent with light mode */
}

/* Navigation Dark Mode */
:root.dark .nav-link {
  color: var(--text-secondary);
  /* Ensure identical layout properties */
  font-weight: 500;
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  white-space: nowrap;
  box-sizing: border-box;
  /* Ensure identical text rendering in dark mode */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

:root.dark .nav-link:hover {
  color: var(--accent-color);
}

.nav-link {
  color: var(--text-secondary);
  /* Force consistent text rendering */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

.nav-link:hover {
  color: var(--accent-color);
}

/* Enhanced navigation highlighting for current page */
:root.dark .nav-link.text-amber-600 {
  color: var(--accent-color) !important;
  background: rgba(245, 158, 11, 0.15) !important;
  border-radius: 0.375rem;
  font-weight: 600 !important;
}

:root.dark .nav-link.text-amber-600:hover {
  transform: translateY(-1px);
}

/* Enhanced current page highlighting for light mode too */
.nav-link.text-amber-600 {
  background: rgba(217, 119, 6, 0.1) !important;
  border-radius: 0.375rem;
  font-weight: 600 !important;
}

.nav-link.text-amber-600:hover {
  transform: translateY(-1px);
}

/* Disabled navigation link for current page */
.nav-link.disabled {
  cursor: default;
  pointer-events: none;
}

.nav-link.disabled:hover {
  transform: none;
}

/* Cards Dark Mode */
:root.dark .card {
  background: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
}

:root.dark .card:hover {
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
}

/* Enhanced card background fixes for dark mode */
:root.dark .project-card,
:root.dark .publication-card,
:root.dark .community-card,
:root.dark .grant-card {
  background: var(--bg-tertiary) !important;
  background-color: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

/* Ensure all card-like elements have proper backgrounds */
:root.dark [class*="card"] {
  background: var(--bg-tertiary) !important;
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Publication card specific styling */
:root.dark .publication-card {
  border-top: 4px solid #0ea5e9 !important;
}

/* Process circles and "How I Work" section styling for dark mode */
:root.dark .bg-amber-600 {
  background-color: #f59e0b !important; /* Brighter amber for better visibility */
}

:root.dark .bg-stone-100 {
  background-color: var(--bg-secondary) !important;
}

/* Ensure process circles are visible */
:root.dark div[class*="bg-amber-600"] {
  background-color: #f59e0b !important;
  color: #000000 !important; /* Black text for better contrast */
}

/* Fix "What I Do" section card contrast */
:root.dark .card {
  background: var(--bg-tertiary) !important;
  background-color: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
}

/* Enhanced "What I Do" section styling */
:root.dark section .card {
  background: var(--bg-tertiary) !important;
  border: 1px solid var(--border-color) !important;
}

:root.dark .card h3 {
  color: var(--text-primary) !important;
}

:root.dark .card p {
  color: var(--text-secondary) !important;
}

/* Fix highlighted/callout sections with bg-amber-50 */
:root.dark .bg-amber-50 {
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: #f59e0b !important;
}

:root.dark [class*="bg-amber-50"] {
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: #f59e0b !important;
  color: var(--text-primary) !important;
}

/* Fix border-amber-500 elements */
:root.dark .border-amber-500 {
  border-color: #f59e0b !important;
}

:root.dark [class*="border-amber-500"] {
  border-color: #f59e0b !important;
}

/* Ensure text in highlighted sections is readable */
:root.dark .bg-amber-50 p,
:root.dark [class*="bg-amber-50"] p {
  color: var(--text-primary) !important;
}

/* Fix list bullets and ensure they're visible */
:root.dark .list-disc {
  color: var(--text-primary) !important;
}

:root.dark .list-disc li {
  color: var(--text-primary) !important;
}

:root.dark .list-disc li::marker {
  color: var(--accent-color) !important;
}

:root.dark ul li::marker {
  color: var(--accent-color) !important;
}

/* Ensure list-inside bullets are visible */
:root.dark .list-inside li {
  color: var(--text-primary) !important;
}

:root.dark .list-inside li::marker {
  color: var(--accent-color) !important;
}
:root.dark .community-card {
  border-left: 4px solid #14b8a6 !important;
}

/* Hero background fixes for dark mode - consolidated and cleaned up */
:root.dark .hero-background,
:root.dark section#hero div.hero-background,
:root.dark section#hero div[style*="hero-background.webp"] {
  background-image: linear-gradient(rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%), url("images/hero-background.webp") !important;
  background-color: transparent !important;
}

/* Remove unwanted solid backgrounds from other hero elements (non-background) */
:root.dark .hero-section:not(.hero-background) {
  background: none !important;
  background-color: transparent !important;
}

:root.dark .hero-content:not(.hero-background) {
  background: none !important;
  background-color: transparent !important;
}

/* Theme toggle styling cleaned up - no more icon animation prevention needed */

/* Fix Tailwind gradient backgrounds in dark mode */
:root.dark .bg-gradient-to-r {
  background: var(--bg-tertiary) !important;
}

:root.dark [class*="bg-gradient-to-"] {
  background: var(--bg-tertiary) !important;
}

/* Specifically fix amber gradient backgrounds */
:root.dark .from-amber-50 {
  background: var(--bg-tertiary) !important;
}

:root.dark .to-stone-50 {
  background: var(--bg-tertiary) !important;
}

/* Ensure gradient backgrounds in community section are visible in dark mode */
:root.dark .bg-gradient-to-r.from-amber-50.to-stone-50 {
  background: linear-gradient(to right, rgba(245, 158, 11, 0.1), rgba(156, 163, 175, 0.05)) !important;
}

/* Dr. Mark Wernsdorfer header styling for dark mode */
:root.dark .text-stone-800.hover\\:text-amber-600 {
  color: var(--text-primary) !important;
}

:root.dark .text-stone-800.hover\\:text-amber-600:hover {
  color: var(--accent-color) !important;
  text-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
  transition: all 0.3s ease;
}

/* Enhanced header name styling */
:root.dark header a[href*="index.html"] {
  color: var(--text-primary) !important;
}

:root.dark header a[href*="index.html"]:hover {
  color: var(--accent-color) !important;
  text-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
}

/* Enhanced theme toggle styling - Fixed width flip switch */
.theme-toggle {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px !important; /* Fixed width */
  height: 28px !important; /* Fixed height */
  background-color: #e5e7eb;
  border: 2px solid #d1d5db;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
  padding: 0;
  overflow: hidden;
}

.theme-toggle:before {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: #ffffff;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.theme-toggle:hover {
  background-color: #d1d5db;
  border-color: #9ca3af;
}

:root.dark .theme-toggle {
  background-color: #374151 !important;
  border-color: #4b5563 !important;
}

:root.dark .theme-toggle:before {
  background-color: #f59e0b !important;
  transform: translateX(20px);
}

:root.dark .theme-toggle:hover {
  background-color: #4b5563 !important;
  border-color: #6b7280 !important;
}

/* Form button styling in dark mode */
:root.dark button[type="submit"],
:root.dark .bg-amber-500 {
  background-color: #f59e0b !important;
  color: #000000 !important;
  border: 2px solid #f59e0b !important;
  font-weight: 600 !important;
}

:root.dark button[type="submit"]:hover,
:root.dark .bg-amber-500:hover,
:root.dark .hover\\:bg-amber-600:hover {
  background-color: #d97706 !important;
  color: #ffffff !important;
  border-color: #d97706 !important;
  box-shadow: 0 0 15px rgba(245, 158, 11, 0.4) !important;
}

/* Language switcher improvements in dark mode */
:root.dark .language-switcher a {
  background-color: rgba(245, 158, 11, 0.1) !important;
  color: var(--accent-color) !important;
  border: 1px solid var(--accent-color) !important;
}

:root.dark .language-switcher a:hover {
  background-color: var(--accent-color) !important;
  color: #000000 !important;
}

/* Contact section link improvements */
:root.dark .bg-stone-100.hover\\:bg-amber-50 {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

:root.dark .bg-stone-100.hover\\:bg-amber-50:hover {
  background-color: rgba(245, 158, 11, 0.1) !important;
  color: var(--accent-color) !important;
  border-color: var(--accent-color) !important;
}

/* Mobile menu button improvements */
:root.dark #mobile-menu-button {
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color);
  border-radius: 0.375rem;
  padding: 0.5rem;
  transition: all 0.3s ease;
}

:root.dark #mobile-menu-button:hover {
  color: var(--accent-color) !important;
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: var(--accent-color) !important;
  transform: scale(1.05);
}

/* Enhanced mobile navigation in dark mode */
@media (max-width: 1279px) {
  :root.dark #header-nav-links {
    background-color: var(--bg-secondary) !important;
    border-color: var(--border-color) !important;
    backdrop-filter: blur(20px);
  }

  :root.dark #header-nav-links .nav-link {
    color: var(--text-secondary) !important;
    border: 1px solid transparent !important;
    transition: all 0.3s ease;
  }

  :root.dark #header-nav-links .nav-link:hover {
    color: var(--accent-color) !important;
    border-color: transparent !important;
  }

  :root.dark #header-nav-links a:hover {
    border-color: transparent !important;
    color: var(--accent-color) !important;
  }
}

/* Final dark mode refinements */
:root.dark .border-stone-200 {
  border-color: var(--border-color) !important;
}

:root.dark .bg-stone-50\/80 {
  background-color: rgba(26, 26, 26, 0.9) !important;
}

:root.dark .backdrop-blur-md {
  backdrop-filter: blur(12px) !important; /* Match light mode exactly */
}

/* Enhanced gradient backgrounds for dark mode */
:root.dark .bg-gradient-to-r.from-amber-50.to-stone-50 {
  background: linear-gradient(to right, rgba(245, 158, 11, 0.05), rgba(64, 64, 64, 0.05)) !important;
}

/* Ensure all text inputs and textareas work in dark mode */
:root.dark input[type="text"],
:root.dark input[type="email"],
:root.dark textarea {
  background-color: var(--bg-secondary) !important;
  border: 2px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: all 0.3s ease;
}

:root.dark input[type="text"]:focus,
:root.dark input[type="email"]:focus,
:root.dark textarea:focus {
  border-color: var(--accent-color) !important;
  background-color: var(--bg-tertiary) !important;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
  outline: none !important;
}

/* Footer improvements in dark mode */
:root.dark footer.bg-stone-800 {
  background-color: #0a0a0a !important;
  border-top: 1px solid var(--border-color);
}

:root.dark footer .text-stone-300 {
  color: var(--text-secondary) !important;
}

:root.dark footer .text-stone-400 {
  color: var(--text-tertiary) !important;
}

:root.dark footer .hover\\:text-amber-600:hover {
  color: var(--accent-color) !important;
}