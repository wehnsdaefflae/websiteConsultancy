/* Modern Consultancy Design System - Based on template.html style */

/* Material Icons */
.material-icons,
.material-icons-outlined {
  font-size: inherit;
  line-height: inherit;
}

/* Optimized Hover Underline Animation with Hardware Acceleration */
.hover-underline-animation {
  display: inline-block;
  position: relative;
}

.hover-underline-animation::after {
  content: "";
  position: absolute;
  width: 100%;
  transform: scaleX(0) translateZ(0);
  height: 2px;
  bottom: -2px;
  left: 0;
  background-color: var(--accent-color);
  transform-origin: bottom right;
  transition: transform var(--transition-fast);
  will-change: transform;
}

.hover-underline-animation:hover::after {
  transform: scaleX(1) translateZ(0);
  transform-origin: bottom left;
}

/* Base Typography and Spacing - Optimized */
:root {
  /* Spacing scale using mathematical progression */
  --space-xs: 0.25rem;    /* 4px */
  --space-sm: 0.5rem;     /* 8px */
  --space-md: 1rem;       /* 16px */
  --space-lg: 1.5rem;     /* 24px */
  --space-xl: 2rem;       /* 32px */
  --space-2xl: 3rem;      /* 48px */
  --space-3xl: 4rem;      /* 64px */
  
  /* Responsive viewport height for mobile browsers */
  --vh: 1vh;
  
  /* Typography scale */
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 2.25rem;
  
  /* Common transition timing */
  --transition-fast: 0.2s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.6s ease;
  
  /* Light mode colors */
  --bg-primary: #fafaf9;
  --bg-secondary: #f5f5f4;
  --bg-tertiary: #ffffff;
  --text-primary: #1c1917;
  --text-secondary: #57534e;
  --text-tertiary: #78716c;
  --border-color: #e7e5e4;
  --accent-color: #d97706;
  --accent-hover: #b45309;
  --shadow-color: rgba(0, 0, 0, 0.1);
}

/* Dark mode colors */
:root.dark {
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2a2a2a;
  --text-primary: #ffffff;
  --text-secondary: #e5e5e5;
  --text-tertiary: #a3a3a3;
  --border-color: #404040;
  --accent-color: #f59e0b;
  --accent-hover: #d97706;
  --shadow-color: rgba(0, 0, 0, 0.5);
}

/* Optimized dark mode base styles with reduced specificity */
:root.dark {
  /* Global dark mode overrides */
  --bg-override-primary: var(--bg-primary);
  --bg-override-secondary: var(--bg-secondary);
  --bg-override-tertiary: var(--bg-tertiary);
}

:root.dark html,
:root.dark body,
:root.dark main {
  background-color: var(--bg-override-primary);
  color: var(--text-primary);
}

:root.dark section:not(#hero) {
  background-color: var(--bg-override-primary);
  color: var(--text-primary);
}

/* Preserve hero section transparency with specificity */
:root.dark section#hero {
  background-color: transparent;
}

:root.dark section#hero *:not(.btn-primary):not(button):not(a[class*="btn"]) {
  background-color: transparent;
}

/* Enhanced button targeting in hero */
:root.dark section#hero .btn-primary,
:root.dark section#hero button,
:root.dark section#hero a[class*="btn"] {
  background-color: var(--accent-color);
}

/* Consolidated background color system */
:root.dark .bg-white { 
  background-color: var(--bg-override-tertiary);
}

:root.dark .bg-stone-50,
:root.dark .bg-stone-100,
:root.dark .bg-gray-50,
:root.dark .bg-gray-100 { 
  background-color: var(--bg-override-secondary);
}

/* Consolidated component styling system */
:root.dark .card,
:root.dark .nav,
:root.dark .header,
:root.dark [class*="card"],
:root.dark .modal,
:root.dark .popup,
:root.dark .dropdown {
  background-color: var(--bg-override-tertiary);
  border-color: var(--border-color);
}

/* Enhanced text color hierarchy without !important */
:root.dark .text-stone-400 {
  color: var(--text-tertiary);
}

/* Comprehensive text color mapping system */
:root.dark .text-stone-50,
:root.dark .text-stone-100,
:root.dark .text-stone-200,
:root.dark .text-gray-50,
:root.dark .text-gray-100,
:root.dark .text-gray-200 {
  color: var(--text-primary);
}

:root.dark .text-stone-300,
:root.dark .text-stone-400,
:root.dark .text-stone-500,
:root.dark .text-stone-600,
:root.dark .text-stone-700,
:root.dark .text-stone-800,
:root.dark .text-gray-300,
:root.dark .text-gray-400 {
  color: var(--text-secondary);
}

/* Enhanced typography system with reduced specificity */
:root.dark h1,
:root.dark h2, 
:root.dark h3,
:root.dark h4,
:root.dark h5,
:root.dark h6,
:root.dark .heading-2,
:root.dark .heading-3 {
  color: var(--text-primary);
}

:root.dark p,
:root.dark .body-large,
:root.dark .body-regular,
:root.dark .body-small {
  color: var(--text-secondary);
}

:root.dark strong {
  color: var(--text-primary);
}

/* Optimized list styling system */
:root.dark ul.text-stone-600,
:root.dark .text-stone-600 ul,
:root.dark ul .text-stone-600,
:root.dark ul.text-stone-600 li,
:root.dark .text-stone-600 ul li,
:root.dark ul .text-stone-600 li {
  color: var(--text-secondary);
}

/* Enhanced link system with proper cascade */
:root.dark a {
  color: var(--accent-color);
}

:root.dark a:hover {
  color: var(--accent-hover);
}

/* Optimized section background system using higher specificity */
:root.dark section:not(#hero) {
  background-color: var(--bg-primary);
}

:root.dark .container {
  background-color: var(--bg-primary);
}

/* Enhanced button styling system using consolidated variables */
:root.dark .btn {
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border-color: var(--btn-primary-border);
}

:root.dark .btn:hover {
  background-color: var(--btn-primary-bg-hover);
  border-color: var(--btn-primary-border-hover);
}

/* Consolidated button system - dark mode variables */
:root.dark {
  --btn-primary-bg: #f59e0b;
  --btn-primary-text: #000000;
  --btn-primary-border: #f59e0b;
  --btn-primary-bg-hover: #d97706;
  --btn-primary-text-hover: #ffffff;
  --btn-primary-border-hover: #d97706;
  --btn-primary-shadow-hover: 0 0 20px rgba(245, 158, 11, 0.4);
}

/* Enhanced button styling system using CSS cascade instead of !important */
:root.dark .btn-primary,
:root.dark .bg-amber-600,
:root.dark button[type="submit"],
:root.dark .bg-amber-500 {
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border: 2px solid var(--btn-primary-border);
  font-weight: 600;
}

:root.dark .btn-primary:hover,
:root.dark .bg-amber-600:hover,
:root.dark .hover\\:bg-amber-700:hover,
:root.dark .bg-amber-500:hover,
:root.dark .hover\\:bg-amber-600:hover,
:root.dark button[type="submit"]:hover {
  background-color: var(--btn-primary-bg-hover);
  color: var(--btn-primary-text-hover);
  border-color: var(--btn-primary-border-hover);
  box-shadow: var(--btn-primary-shadow-hover);
}

/* Enhanced form elements system with performance optimization */
:root {
  /* Form-specific variables */
  --form-bg: var(--bg-primary);
  --form-bg-focus: var(--bg-tertiary);
  --form-border: var(--border-color);
  --form-border-focus: var(--accent-color);
  --form-text: var(--text-primary);
  --form-placeholder: var(--text-tertiary);
  --form-shadow-focus: rgba(217, 119, 6, 0.1);
}

:root.dark {
  --form-bg: var(--bg-secondary);
  --form-bg-focus: var(--bg-tertiary);
  --form-border: var(--border-color);
  --form-border-focus: var(--accent-color);
  --form-text: var(--text-primary);
  --form-placeholder: var(--text-tertiary);
  --form-shadow-focus: rgba(245, 158, 11, 0.1);
}

/* Optimized form elements with hardware acceleration */
input,
textarea,
select {
  background-color: var(--form-bg);
  color: var(--form-text);
  border: 2px solid var(--form-border);
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  font-size: var(--font-size-base);
  transition: all var(--transition-normal);
  width: 100%;
  font-family: inherit;
  /* Performance optimization */
  will-change: border-color, box-shadow, background-color;
  transform: translateZ(0);
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--form-border-focus);
  background-color: var(--form-bg-focus);
  box-shadow: 0 0 0 3px var(--form-shadow-focus);
}

input::placeholder,
textarea::placeholder {
  color: var(--form-placeholder);
}

/* Navigation Links - Template Style */
.nav-link {
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  transition: all 0.2s ease;
  display: block;
  /* Ensure consistent layout across themes */
  white-space: nowrap;
  box-sizing: border-box;
  /* Force consistent text rendering */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

.nav-link:hover {
  color: var(--accent-color);
}

/* Mobile Menu */
#header-nav-links {
  transition: all 0.3s ease;
}

#header-nav-links.hidden {
  display: none;
}

@media (max-width: 1279px) {
  #header-nav-links {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: rgba(245, 245, 244, 0.98);
    backdrop-filter: blur(12px);
    border-top: 1px solid #e7e5e4;
    border-bottom: 1px solid #e7e5e4;
    padding: 1.5rem;
    display: flex; /* Override Tailwind hidden class */
    flex-direction: column;
    gap: 0.75rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    z-index: 40;
  }
  
  #header-nav-links.hidden {
    display: none; /* Only hide when explicitly hidden */
  }
  
  #header-nav-links .nav-link,
  #header-nav-links a {
    font-size: 1.125rem;
    padding: 0.875rem 1rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    text-align: center;
    border: 1px solid transparent;
  }
  
  #header-nav-links a:hover {
    color: #d97706;
    border-color: #d97706;
  }
}

@media (min-width: 1280px) {
  #header-nav-links {
    position: static;
    background: transparent;
    backdrop-filter: none;
    border: none;
    padding: 0;
    display: flex;
    flex-direction: row;
    gap: 2.5rem;
    margin-right: 2rem; /* Add spacing to the right of nav links */
    /* Force consistent positioning */
    width: auto;
    min-width: fit-content;
    flex-shrink: 0;
    /* Ensure identical layout in both themes */
    align-items: center;
    justify-content: flex-start;
  }
  
  #header-nav-links.hidden {
    display: flex;
  }
  
  /* Ensure navigation positioning is pixel-perfect identical in both themes */
  nav#header-nav-links {
    position: relative;
    transform: translateX(0);
    left: auto;
    right: auto;
    margin-left: 0;
  }
  
  /* Ensure nav links maintain consistent spacing and positioning */
  nav#header-nav-links .nav-link {
    display: inline-block;
    vertical-align: middle;
    margin: 0;
    border: none;
    outline: none;
  }
}

/* Header sticky positioning - optimized with higher specificity */
body > header {
  /* Force sticky positioning */
  position: sticky;
  top: 0;
  z-index: 50;
}

/* Fix flexbox container that prevents sticky positioning */
.layout-container {
  /* Remove height constraints that prevent sticky */
  height: auto;
  min-height: 100vh;
}

/* Ensure parent containers support sticky positioning */
div.relative.flex.size-full.min-h-screen.flex-col {
  /* Remove overflow hidden that can break sticky */
  overflow: visible;
}

/* Ensure body supports sticky positioning */
body {
  overflow-x: hidden;
  height: auto;
}

/* Section Spacing - Template Style */
.section-minimal {
  padding: 4rem 0;
  margin: 2rem 0;
}

/* Optimized Card System using CSS custom properties */
.card {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 0.75rem;
  padding: var(--space-xl);
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  transition: all var(--transition-normal);
  /* Hardware acceleration */
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

.card:hover {
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
  transform: translateY(-2px) translateZ(0);
}

/* Specialized card variants */
.project-card {
  background: var(--bg-tertiary);
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  transition: all var(--transition-normal);
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

.project-card:hover {
  transform: translateY(-4px) scale(1.02) translateZ(0);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.publication-card {
  background: var(--bg-tertiary);
  border-top: 4px solid #0ea5e9;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  transition: all var(--transition-normal);
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

.publication-card:hover {
  transform: translateY(-2px) scale(1.05) translateZ(0);
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
}

.community-card {
  background: var(--bg-tertiary);
  border: 2px dashed #14b8a6;
  border-radius: 0.75rem;
  padding: var(--space-xl);
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  transition: all var(--transition-normal);
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

.community-card:hover {
  border-color: #0f766e;
  transform: translateY(-2px) translateZ(0);
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
}

/* Typography System - Optimized with CSS custom properties */
.heading-2 {
  font-size: var(--font-size-3xl);
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: -0.025em;
  color: var(--text-primary);
}

.heading-3 {
  font-size: var(--font-size-2xl);
  font-weight: 600;
  line-height: 1.3;
  color: var(--text-primary);
}

.body-large {
  font-size: var(--font-size-lg);
  line-height: 1.7;
  color: var(--text-secondary);
}

.body-regular {
  font-size: var(--font-size-base);
  line-height: 1.6;
  color: var(--text-secondary);
}

.body-small {
  font-size: var(--font-size-sm);
  line-height: 1.6;
  color: var(--text-tertiary);
}

/* Enhanced Hero Section Background Positioning - Enhanced Specificity System */
/* Base hero background styling with enhanced cascade specificity */
body section#hero div.relative[style*="background-image"] {
  background-position: center center;
  background-size: cover; /* Changed from 150% auto to cover for mobile */
  background-repeat: no-repeat;
  transition: background-position 0.3s ease-in-out;
}

/* Enhanced desktop background positioning (640px+) */
@media (min-width: 640px) {
  body section#hero div.relative[style*="background-image"] {
    background-position: 100% center; /* 100% as you specified */
    background-size: 150% auto; /* Keep larger size for desktop effect */
    background-repeat: no-repeat;
  }
}

/* Enhanced mobile background positioning (below 640px) */
@media (max-width: 639px) {
  body section#hero div.relative[style*="background-image"] {
    background-position: center center;
    background-size: cover; /* Use cover to fill completely on mobile */
    background-repeat: no-repeat;
  }
}

/* List Styling - Template Style */
.list-modern {
  list-style: none;
  padding: 0;
}

.list-modern li {
  position: relative;
  padding-left: 1.5rem;
  margin-bottom: 0.5rem;
  color: #57534e;
  line-height: 1.6;
}

.list-modern li::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0.75em;
  width: 4px;
  height: 4px;
  background: #d97706;
  border-radius: 50%;
}

/* Images - Template Style */
.profile-image {
  width: 100%;
  max-width: 280px;
  height: 280px;
  border-radius: 0.75rem;
  object-fit: cover;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  transition: transform 0.3s ease;
}

.profile-image:hover {
  transform: scale(1.02);
}

.project-card-image {
  width: 100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-radius: 0.75rem;
}

.community-image {
  border-radius: 0.75rem;
  object-fit: cover;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
}

/* Consolidated responsive design system */
:root {
  /* Responsive breakpoints */
  --breakpoint-mobile: 480px;
  --breakpoint-tablet: 768px;
  --breakpoint-desktop: 1025px;
  --breakpoint-xl-desktop: 1280px;
  
  /* Responsive spacing modifiers */
  --space-mobile-multiplier: 0.75;
  --space-tablet-multiplier: 0.875;
  --space-desktop-multiplier: 1;
}

/* Enhanced mobile-first responsive optimization */
@media (max-width: 480px) {
  :root {
    --space-lg: calc(1.5rem * var(--space-mobile-multiplier));
    --space-xl: calc(2rem * var(--space-mobile-multiplier));
    --space-2xl: calc(3rem * var(--space-mobile-multiplier));
  }
  
  /* Fix header container overflow on very small screens */
  header.sticky {
    padding-left: 0.75rem; /* Reduce padding on very small screens */
    padding-right: 0.75rem;
  }
  
  /* Reduce gaps in header on very small screens */
  header .flex.items-center.gap-2 {
    gap: 0.25rem; /* Reduce gap between header elements */
  }
  
  /* Ensure mobile menu button stays in viewport */
  #mobile-menu-button {
    min-width: auto;
    padding: 0.375rem; /* Reduce padding */
  }
  
  #mobile-menu-button .material-icons-outlined {
    font-size: 1.25rem; /* Slightly smaller icon */
  }
  
  /* Reduce theme toggle size */
  .theme-toggle {
    width: 40px;
    height: 24px;
  }
  
  .theme-toggle:before {
    width: 16px;
    height: 16px;
    top: 2px;
    left: 2px;
  }
  
  :root.dark .theme-toggle:before {
    transform: translateX(16px);
  }
  
  .profile-image {
    max-width: 200px;
    height: 200px;
  }
  
  .project-card-image {
    aspect-ratio: 4 / 3;
  }
  
  .btn-primary {
    padding: 0.75rem 1.25rem;
    font-size: 0.875rem;
    border-radius: 0.5rem;
  }
  
  .input-field {
    font-size: 16px;
    padding: 1rem;
    border-radius: 0.75rem;
  }
  
  textarea.input-field {
    min-height: 100px;
    resize: vertical;
  }
}

@media (max-width: 768px) {
  :root {
    --space-lg: calc(1.5rem * var(--space-tablet-multiplier));
    --space-xl: calc(2rem * var(--space-tablet-multiplier));
  }
  
  .profile-image {
    max-width: 240px;
    height: 240px;
  }
  
  .project-card-image {
    aspect-ratio: 3 / 2;
  }
  
  .btn-primary {
    padding: 0.875rem 1.5rem;
    font-size: 0.875rem;
  }
  
  .input-field {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 0.875rem 1rem;
  }
  
  textarea.input-field {
    font-size: 16px;
    min-height: 120px;
  }
  
  .form-message {
    font-size: 1rem;
  }
}

@media (min-width: 1025px) {
  .profile-image:hover {
    transform: scale(1.05);
  }
  
  .community-image:hover {
    transform: scale(1.02);
  }
  
  .input-field:hover {
    border-color: var(--form-border);
    background: var(--form-bg-focus);
  }
  
  .btn-primary:hover {
    transform: translateY(-2px) translateZ(0);
  }
}

/* Optimized input field system replacing legacy styles */
.input-field {
  background: var(--form-bg);
  border: 2px solid var(--form-border);
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  color: var(--form-text);
  font-size: var(--font-size-base);
  transition: all var(--transition-normal);
  width: 100%;
  /* Performance optimization */
  will-change: border-color, box-shadow, background-color;
  transform: translateZ(0);
}

.input-field:focus {
  outline: none;
  border-color: var(--form-border-focus);
  box-shadow: 0 0 0 3px var(--form-shadow-focus);
  background: var(--form-bg-focus);
}

.input-field::placeholder {
  color: var(--form-placeholder);
}

/* Mobile font size improvements are now consolidated above */

/* Optimized Button System using CSS custom properties */
.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 2rem;
  background: var(--accent-color);
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 600;
  font-size: var(--font-size-base);
  text-decoration: none;
  transition: all var(--transition-normal);
  cursor: pointer;
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  min-height: 44px; /* Touch target size for accessibility */
  white-space: nowrap;
  /* Hardware acceleration for better performance */
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

.btn-primary:hover {
  background: var(--accent-hover);
  transform: translateY(-1px) translateZ(0);
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
}

.btn-primary:active {
  transform: translateY(0) translateZ(0);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-primary:focus-visible {
  outline: 3px solid var(--accent-color);
  outline-offset: 2px;
}

/* Button responsive styles are now consolidated above */
.form-message {
  font-size: 0.875rem;
  line-height: 1.5;
}

/* Services Grid Layout */
.services-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-xl);
}

/* Enhanced Landing Page Animations */
.hero-title {
  animation: fadeInScale 0.8s ease-out forwards;
}

.hero-subtitle {
  animation: slideInLeft 0.6s ease-out 0.2s both;
}

.hero-description {
  animation: slideInRight 0.6s ease-out 0.4s both;
}

.hero-buttons {
  animation: fadeInUp 0.6s ease-out 0.6s both;
}

/* Enhanced animation performance with better hardware acceleration */
@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translate3d(0, 50px, 0) scale3d(0.95, 0.95, 1);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale3d(1, 1, 1);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translate3d(-30px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translate3d(30px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate3d(0, 20px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Hardware-accelerated floating animation */
@keyframes float {
  0%, 100% {
    transform: translate3d(0, 0, 0);
  }
  50% {
    transform: translate3d(0, -6px, 0);
  }
}

/* Optimized breathing animation */
@keyframes breathe {
  0%, 100% {
    transform: scale3d(1, 1, 1);
  }
  50% {
    transform: scale3d(1.02, 1.02, 1);
  }
}

/* Hardware acceleration for better performance */
.hero-title,
.hero-subtitle,
.hero-description,
.hero-buttons,
.card,
.btn-primary {
  will-change: transform, opacity;
  transform: translateZ(0); /* Force hardware acceleration */
}

.breathe {
  animation: breathe 4s ease-in-out infinite;
}

/* Enhanced focus states for accessibility using CSS specificity */
*:focus-visible,
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible {
  outline: 3px solid var(--accent-color);
  outline-offset: 2px;
  border-radius: 0.25rem;
}

:root.dark *:focus-visible,
:root.dark button:focus-visible,
:root.dark a:focus-visible,
:root.dark input:focus-visible,
:root.dark textarea:focus-visible {
  outline-color: var(--accent-color);
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
}

/* Smooth transitions for all interactive elements */
a, button, .nav-link, .btn-primary, .card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
  }
  
  .float,
  .breathe,
  .hero-background {
    animation: none;
  }
}

/* Dark mode transitions and body styling */
body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Ensure dark mode applies to the entire page using higher specificity */
:root.dark body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Header Dark Mode with enhanced specificity */
:root.dark header {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
  backdrop-filter: blur(12px); /* Keep consistent with light mode */
}

body > header {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
}

/* Fix header transparency in dark mode with increased specificity */
:root.dark header.bg-stone-50\/80 {
  background-color: rgba(26, 26, 26, 0.8);
  backdrop-filter: blur(12px); /* Consistent with light mode */
}

/* Enhanced mobile header container to prevent overflow */
@media (max-width: 640px) {
  header {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  /* Ensure header content doesn't overflow */
  header > div:last-child {
    flex-shrink: 1;
    min-width: 0;
  }
  
  /* Make language switcher more compact on mobile */
  .language-switcher {
    gap: 0.125rem;
  }
  
  .language-switcher a,
  .language-switcher span {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
  }
}

/* Navigation Dark Mode */
:root.dark .nav-link {
  color: var(--text-secondary);
  /* Ensure identical layout properties */
  font-weight: 500;
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  white-space: nowrap;
  box-sizing: border-box;
  /* Ensure identical text rendering in dark mode */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

:root.dark .nav-link:hover {
  color: var(--accent-color);
}

.nav-link {
  color: var(--text-secondary);
  /* Force consistent text rendering */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variant: normal;
  letter-spacing: normal;
  word-spacing: normal;
}

.nav-link:hover {
  color: var(--accent-color);
}

/* Enhanced navigation highlighting for current page using higher specificity */
:root.dark .nav-link.text-amber-600 {
  color: var(--accent-color);
  background: rgba(245, 158, 11, 0.15);
  border-radius: 0.375rem;
  font-weight: 600;
}

:root.dark .nav-link.text-amber-600:hover {
  transform: translateY(-1px);
}

/* Enhanced current page highlighting for light mode too */
a.nav-link.text-amber-600 {
  background: rgba(217, 119, 6, 0.1);
  border-radius: 0.375rem;
  font-weight: 600;
}

a.nav-link.text-amber-600:hover {
  transform: translateY(-1px);
}

/* Disabled navigation link for current page */
.nav-link.disabled {
  cursor: default;
  pointer-events: none;
}

.nav-link.disabled:hover {
  transform: none;
}

/* Optimized Cards Dark Mode using enhanced specificity */
:root.dark .card {
  background: var(--bg-tertiary);
  border-color: var(--border-color);
  color: var(--text-primary);
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
}

:root.dark .card:hover {
  box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color);
}

/* Consolidated card background fixes for dark mode */
:root.dark .project-card,
:root.dark .publication-card,
:root.dark .community-card,
:root.dark .grant-card,
:root.dark [class*="card"] {
  background: var(--bg-tertiary);
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

/* Enhanced Publication Card Dark Mode Styling */
:root.dark body .publication-card {
  border-top: 4px solid #0ea5e9;
}

/* Enhanced Process Circles Dark Mode System - Higher Specificity */
:root.dark body .bg-amber-600,
:root.dark body [class*="bg-amber-600"] {
  background-color: #f59e0b; /* Brighter amber for better visibility */
}

:root.dark body .bg-stone-100,
:root.dark body [class*="bg-stone-100"] {
  background-color: var(--bg-secondary);
}

/* Enhanced Process Circles Visibility System */
:root.dark body div[class*="bg-amber-600"] {
  background-color: #f59e0b;
  color: #000000; /* Black text for better contrast */
}

/* Enhanced Card System Dark Mode - Consolidated Approach */
:root.dark body .card,
:root.dark body section .card {
  background: var(--bg-tertiary);
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
  color: var(--text-primary);
  box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
  border: 1px solid var(--border-color);
}

/* Enhanced Card Text System Dark Mode */
:root.dark body .card h3 {
  color: var(--text-primary);
}

:root.dark body .card p {
  color: var(--text-secondary);
}

/* Enhanced Highlighted Sections System - Amber Background */
:root.dark body .bg-amber-50,
:root.dark body [class*="bg-amber-50"] {
  background-color: rgba(245, 158, 11, 0.1);
  border-color: #f59e0b;
  color: var(--text-primary);
}

/* Enhanced Border System - Amber Borders */
:root.dark body .border-amber-500,
:root.dark body [class*="border-amber-500"] {
  border-color: #f59e0b;
}

/* Enhanced Text Readability in Highlighted Sections */
:root.dark body .bg-amber-50 p,
:root.dark body [class*="bg-amber-50"] p {
  color: var(--text-primary);
}

/* Enhanced List System Dark Mode - Consolidated Approach */
:root.dark body .list-disc,
:root.dark body .list-disc li,
:root.dark body .list-inside li {
  color: var(--text-primary);
}

/* Enhanced List Marker System */
:root.dark body .list-disc li::marker,
:root.dark body .list-inside li::marker,
:root.dark body ul li::marker {
  color: var(--accent-color);
}
/* Enhanced Community Card System */
:root.dark body .community-card {
  border-left: 4px solid #14b8a6;
}

/* Enhanced Hero Background System - Final Optimization */
:root.dark body .hero-background,
:root.dark body section#hero div.hero-background,
:root.dark body section#hero div[style*="hero-background.webp"] {
  background-image: linear-gradient(rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%), url("images/hero-background.webp");
  background-color: transparent;
}

/* Enhanced Hero Content System - Remove Unwanted Backgrounds */
:root.dark body .hero-section:not(.hero-background),
:root.dark body .hero-content:not(.hero-background) {
  background: none;
  background-color: transparent;
}

/* Theme toggle styling cleaned up - no more icon animation prevention needed */

/* Enhanced Gradient Background System Dark Mode */
:root.dark body .bg-gradient-to-r,
:root.dark body [class*="bg-gradient-to-"],
:root.dark body .from-amber-50,
:root.dark body .to-stone-50 {
  background: var(--bg-tertiary);
}

/* Enhanced Gradient System - Community Section */
:root.dark body .bg-gradient-to-r.from-amber-50.to-stone-50 {
  background: linear-gradient(to right, rgba(245, 158, 11, 0.1), rgba(156, 163, 175, 0.05));
}

/* Enhanced Header Text System - Dr. Mark Wernsdorfer */
:root.dark body .text-stone-800.hover\\:text-amber-600,
:root.dark body header a[href*="index.html"] {
  color: var(--text-primary);
}

:root.dark body .text-stone-800.hover\\:text-amber-600:hover,
:root.dark body header a[href*="index.html"]:hover {
  color: var(--accent-color);
  text-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
  transition: all 0.3s ease;
}

/* Optimized theme toggle with CSS variables */
:root {
  --theme-toggle-bg: #e5e7eb;
  --theme-toggle-border: #d1d5db;
  --theme-toggle-knob: #ffffff;
  --theme-toggle-bg-hover: #d1d5db;
  --theme-toggle-border-hover: #9ca3af;
}

:root.dark {
  --theme-toggle-bg: #374151;
  --theme-toggle-border: #4b5563;
  --theme-toggle-knob: #f59e0b;
  --theme-toggle-bg-hover: #4b5563;
  --theme-toggle-border-hover: #6b7280;
}

.theme-toggle {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 28px;
  background-color: var(--theme-toggle-bg);
  border: 2px solid var(--theme-toggle-border);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
  padding: 0;
  overflow: hidden;
}

.theme-toggle:before {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: var(--theme-toggle-knob);
  border-radius: 50%;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.theme-toggle:hover {
  background-color: var(--theme-toggle-bg-hover);
  border-color: var(--theme-toggle-border-hover);
}

:root.dark .theme-toggle:before {
  transform: translateX(20px);
}

/* Form button styling consolidated */
:root.dark button[type="submit"],
:root.dark .bg-amber-500 {
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border: 2px solid var(--btn-primary-border);
  font-weight: 600;
}

:root.dark button[type="submit"]:hover,
:root.dark .bg-amber-500:hover,
:root.dark .hover\\:bg-amber-600:hover {
  background-color: var(--btn-primary-bg-hover);
  color: var(--btn-primary-text-hover);
  border-color: var(--btn-primary-border-hover);
  box-shadow: 0 0 15px rgba(245, 158, 11, 0.4);
}

/* Optimized language switcher system */
:root.dark {
  --language-switcher-bg: rgba(245, 158, 11, 0.1);
  --language-switcher-border: var(--accent-color);
  --language-switcher-text: var(--accent-color);
  --language-switcher-bg-hover: var(--accent-color);
  --language-switcher-text-hover: #000000;
}

:root.dark .language-switcher a {
  background-color: var(--language-switcher-bg);
  color: var(--language-switcher-text);
  border: 1px solid var(--language-switcher-border);
}

:root.dark .language-switcher a:hover {
  background-color: var(--language-switcher-bg-hover);
  color: var(--language-switcher-text-hover);
}

/* Enhanced Contact Section System */
:root.dark body .bg-stone-100.hover\\:bg-amber-50 {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

:root.dark body .bg-stone-100.hover\\:bg-amber-50:hover {
  background-color: rgba(245, 158, 11, 0.1);
  color: var(--accent-color);
  border-color: var(--accent-color);
}

/* Enhanced Mobile Menu Button System */
:root.dark body #mobile-menu-button {
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-radius: 0.375rem;
  padding: 0.5rem;
  transition: all 0.3s ease;
}

:root.dark body #mobile-menu-button:hover {
  color: var(--accent-color);
  background-color: rgba(245, 158, 11, 0.1);
  border-color: var(--accent-color);
  transform: scale(1.05);
}

/* Ensure mobile menu button stays within viewport */
#mobile-menu-button {
  flex-shrink: 0;
  position: relative;
  z-index: 51;
}

/* Additional mobile header fixes */
@media (max-width: 375px) {
  /* For very small screens (iPhone SE, etc.) */
  header {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  header .flex.items-center.gap-2.sm\\:gap-4 {
    gap: 0.125rem;
  }
  
  .theme-toggle {
    width: 36px;
    height: 20px;
  }
  
  .theme-toggle:before {
    width: 14px;
    height: 14px;
    top: 1px;
    left: 1px;
  }
  
  :root.dark .theme-toggle:before {
    transform: translateX(14px);
  }
  
  /* Hide language switcher on very small screens if needed */
  .language-switcher {
    display: none;
  }
}

/* Enhanced Mobile Navigation System Dark Mode */
@media (max-width: 1279px) {
  :root.dark body #header-nav-links {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    backdrop-filter: blur(20px);
  }

  :root.dark body #header-nav-links .nav-link {
    color: var(--text-secondary);
    border: 1px solid transparent;
    transition: all 0.3s ease;
  }

  :root.dark body #header-nav-links .nav-link:hover,
  :root.dark body #header-nav-links a:hover {
    color: var(--accent-color);
    border-color: transparent;
  }
}

/* Enhanced Border System Final */
:root.dark body .border-stone-200 {
  border-color: var(--border-color);
}

:root.dark body .bg-stone-50\/80 {
  background-color: rgba(26, 26, 26, 0.9);
}

:root.dark body .backdrop-blur-md {
  backdrop-filter: blur(12px); /* Match light mode exactly */
}

/* Enhanced Gradient Backgrounds Dark Mode */
:root.dark body .bg-gradient-to-r.from-amber-50.to-stone-50 {
  background: linear-gradient(to right, rgba(245, 158, 11, 0.05), rgba(64, 64, 64, 0.05));
}

/* Enhanced Form Input System Dark Mode */
:root.dark body input[type="text"],
:root.dark body input[type="email"],
:root.dark body textarea {
  background-color: var(--bg-secondary);
  border: 2px solid var(--border-color);
  color: var(--text-primary);
  transition: all 0.3s ease;
}

:root.dark body input[type="text"]:focus,
:root.dark body input[type="email"]:focus,
:root.dark body textarea:focus {
  border-color: var(--accent-color);
  background-color: var(--bg-tertiary);
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
  outline: none;
}

/* Enhanced Footer System Dark Mode */
:root.dark body footer.bg-stone-800 {
  background-color: #0a0a0a;
  border-top: 1px solid var(--border-color);
}

:root.dark body footer .text-stone-300 {
  color: var(--text-secondary);
}

:root.dark body footer .text-stone-400 {
  color: var(--text-tertiary);
}

:root.dark body footer .hover\\:text-amber-600:hover {
  color: var(--accent-color);
}

/* Logo responsive text layout - Allow line breaks on narrow screens */
@media (max-width: 640px) {
  /* Keep the logo container horizontal (SVG + text side by side) */
  header .flex.items-center.gap-2.text-stone-800 {
    align-items: center;
    gap: 0.5rem;
  }
  
  /* Remove whitespace-nowrap on smaller screens to allow text wrapping */
  header a.logo-text.whitespace-nowrap {
    white-space: normal;
    line-height: 1.1;
    text-align: left;
    min-width: 0;
    display: inline;
  }
  
  /* Make each line of the logo display as block to stack vertically */
  .logo-first-line,
  .logo-second-line {
    display: block;
    line-height: 1;
  }
  
  /* Adjust spacing between logo lines */
  .logo-first-line {
    margin-bottom: 0.125rem;
  }
  
  /* Keep icon size consistent - don't shrink on mobile */
  header .flex.items-center.gap-2.text-stone-800 .size-6 {
    flex-shrink: 0;
  }
}

@media (max-width: 480px) {
  /* Further optimize for very small screens */
  header a.logo-text.whitespace-nowrap {
    font-size: 0.875rem;
    font-weight: 600;
    line-height: 1.1;
  }
  
  /* Keep the logo container horizontal with tighter spacing */
  header .flex.items-center.gap-2.text-stone-800 {
    gap: 0.375rem;
  }
  
  /* Tighter spacing between logo lines on very small screens */
  .logo-first-line {
    margin-bottom: 0;
  }
  
  /* Keep icon size consistent on very small screens too */
  header .flex.items-center.gap-2.text-stone-800 .size-6 {
    flex-shrink: 0;
  }
}